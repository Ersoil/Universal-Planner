<Page
    x:Class="Universal_Planner.Pages.planner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Universal_Planner.Componets.Resources"
    xmlns:viewModels="using:Universal_Planner.Componets.viewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Margin="80 20 20 20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.4*"></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Grid.ColumnSpan="2">
            <TextBlock Text="Планирование" FontWeight="ExtraLight" FontSize="34" Foreground="{ThemeResource SystemAccentColor}"/>
        </Grid>
        <Grid Column="0" Grid.Row="1">
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="15*"/>
                    <RowDefinition Height="2*"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0">
                    <TextBlock x:ConnectionId='9' Text="Задачи" Margin="0 0 0 10" x:Name="ListHeader" FontWeight="ExtraLight" FontSize="26"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="6*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Foreground="{ThemeResource SystemAccentColor}" PlaceholderText="Поиск" Grid.Column="0" Margin="0,15,0,15"/>
                        <StackPanel Orientation="Horizontal" Grid.Column="1">
                            <Button  Foreground="White" FontSize="12" Background="{ThemeResource SystemAccentColor}" Margin="0,15,0,15" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <FontIcon Glyph="&#xE16E;"></FontIcon>
                                <Button.Flyout>
                                    <Flyout Placement="Bottom">
                                        <Flyout.Content>
                                            <StackPanel>
                                                <RadioButton Content="По дате создания (возрастание)"/>
                                                <RadioButton Content="По дате создания (убывание)"/>
                                                <RadioButton Content="По количеству тегов (возрастание)"/>
                                                <RadioButton Content="По количеству тегов (убывание)"/>
                                                <Border BorderThickness="1" BorderBrush="{ThemeResource SystemControlBackgroundChromeMediumBrush}"></Border>
                                                <CheckBox Content="Показать выполненые"/>
                                            </StackPanel>
                                        </Flyout.Content>
                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                            <Button x:ConnectionId='10' Foreground="White" FontSize="12" Background="{ThemeResource SystemAccentColor}" Margin="0,15,0,15" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"                         >
                                <FontIcon Glyph="&#xE109;"></FontIcon>
                            </Button>
                        </StackPanel>
                    </Grid>
                    <Border BorderThickness="1" BorderBrush="{ThemeResource SystemAccentColor}"/>
                </StackPanel>
                <ScrollViewer Grid.Row="1">
                    <ListView x:ConnectionId='8' x:Name="TaskListView" ItemsSource="{Binding TaskViewList}" MinWidth="300"                                                  CanDragItems="True"                                                   >
                        <ListView.ItemTemplate>
                            <DataTemplate                                       xmlns:viewModels="using:Universal_Planner.Componets.viewModels">
                                <RelativePanel Margin="5"
                   Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
                   HorizontalAlignment="Stretch">
                                    <RelativePanel.RenderTransform>
                                        <TranslateTransform X="{Binding IsSubtask,
                               Mode=OneWay,
                               Converter={StaticResource BoolToIndent}}"/>
                                    </RelativePanel.RenderTransform>

                                    <StackPanel Margin="20 10 0 0">
                                        <TextBlock Text="{Binding Title}" FontSize="14" FontWeight="ExtraLight" TextTrimming="CharacterEllipsis"/>
                                        <TextBlock Text="{Binding Description}" FontSize="12" TextTrimming="CharacterEllipsis" Margin="40,10,0,10"/>
                                    </StackPanel>
                                    <Button Background="{ThemeResource SystemAccentColor}" Foreground="White" MinWidth="90" Margin="0,0,20,0" RelativePanel.AlignRightWithPanel="True" RelativePanel.AlignTopWithPanel="True">
                                        <FontIcon HorizontalAlignment="Stretch" FontSize="12" Glyph="&#xE1CB;"/>
                                    </Button>
                                    <TextBlock Text="{Binding DueDate,
                                 Converter={StaticResource DateTimeFmt}}"
                   FontSize="12"
                   Margin="10"
                   RelativePanel.AlignRightWithPanel="True"
                   RelativePanel.AlignBottomWithPanel="True"/>
                                    <Border RelativePanel.AlignBottomWithPanel="True" RelativePanel.AlignLeftWithPanel="true" RelativePanel.AlignRightWithPanel="True" BorderBrush="{ThemeResource SystemAccentColor}" BorderThickness="3"/>
                                </RelativePanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Padding" Value="0"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="CanDrag" Value="True"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </ScrollViewer>
                <Grid x:ConnectionId='7' x:Name="TrashZone"
      Grid.Row="2"
      Margin="5"
      Background="{ThemeResource SystemAccentColor}"
      AllowDrop="True"                   
                                                 
                           >

                    <FontIcon Foreground="White"
              Glyph="&#xE107;"/>
                </Grid>

            </Grid>
        </Grid>
        <Grid Column="1" Row="1" Margin="30 0 0 0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <StackPanel VerticalAlignment="Stretch">
                    <StackPanel x:ConnectionId='2' x:Name="TaskViewEdit" DataContext="{Binding ElementName=TaskListView, Path=SelectedItem}" Orientation="Horizontal">
                        <TextBox x:ConnectionId='6' Text="{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0 0 0 10" BorderThickness="0" x:Name="taskTitle" FontWeight="ExtraLight" FontSize="26"/>

                        <Button VerticalAlignment="Stretch" Foreground="{ThemeResource SystemAccentColor}" Background="Transparent" BorderThickness="0">
                            <FontIcon Glyph="&#xE18B;"></FontIcon>
                            <Button.Flyout>
                                <Flyout Placement="Full">
                                    <StackPanel>
                                        <Grid Background="{ThemeResource SystemAccentColor}" Margin="0,0,50,10">
                                            <TextBlock Text="Имя задачи" Margin="0 0 0 10" Foreground="White" FontWeight="ExtraLight" FontSize="26"/>
                                        </Grid>
                                        <TextBlock  Text="Описание" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                                        <RichTextBlock MinHeight="250"></RichTextBlock>
                                        <TextBlock  Text="Напоминания" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <ToggleButton  Margin="5" Content="Пн"/>
                                            <ToggleButton  Margin="5" Content="Вт"/>
                                            <ToggleButton   Margin="5" Content="Ср"/>
                                            <ToggleButton   Margin="5" Content="Чт"/>
                                            <ToggleButton   Margin="5" Content="Пт"/>
                                            <ToggleButton   Margin="5" Content="Сб"/>
                                            <ToggleButton   Margin="5" Content="Вс"/>
                                        </StackPanel>
                                        <TextBlock  Text="Теги" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                                        <StackPanel MinHeight="50">
                                        </StackPanel>
                                        <TextBlock  Text="Файлы" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                                        <VariableSizedWrapGrid ItemHeight="30" ItemWidth="30" MaximumRowsOrColumns="4" MinHeight="250">
                                        </VariableSizedWrapGrid>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                    <TextBlock Text="Описание" Margin="15 10 0 10" FontWeight="ExtraLight" FontSize="18"/>
                    <Grid DataContext="{Binding ElementName=TaskListView, Path=SelectedItem}" Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" MinHeight="250">
                        <TextBox Text="{Binding Description,
                       Mode=TwoWay,
                       UpdateSourceTrigger=PropertyChanged}"
         AcceptsReturn="True"
         TextWrapping="Wrap"
         MinHeight="250"/>
                    </Grid>
                    <CheckBox Content="Выполнено"
          IsChecked="{Binding IsCompleted,
                              Mode=TwoWay,
                              UpdateSourceTrigger=PropertyChanged}"
          Margin="15,10,0,10"/>
                    <TextBlock  Text="Напоминания и дедлайны" Margin="15 0 0 10" FontWeight="ExtraLight" FontSize="18"/>
                    <StackPanel Orientation="Horizontal">
                        <Button Margin="5" Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon Glyph="&#xE161;" Margin="5"></FontIcon>
                                <TextBlock Text="Установить напоминания" FontSize="12" Margin="5"/>
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout Placement="Bottom">
                                    <StackPanel>
                                        <TextBlock Margin="5" Text="Дни недели" Foreground="{ThemeResource SystemAccentColor}" FontWeight="Light" FontSize="16"/>
                                        <StackPanel Orientation="Horizontal">
                                            <ToggleButton  Margin="5" Content="Пн"/>
                                            <ToggleButton  Margin="5" Content="Вт"/>
                                            <ToggleButton   Margin="5" Content="Ср"/>
                                            <ToggleButton   Margin="5" Content="Чт"/>
                                            <ToggleButton   Margin="5" Content="Пт"/>
                                            <ToggleButton   Margin="5" Content="Сб"/>
                                            <ToggleButton   Margin="5" Content="Вс"/>
                                        </StackPanel>
                                        <TextBlock Margin="5" Text="Время для напоминаний" Foreground="{ThemeResource SystemAccentColor}"  FontWeight="Light" FontSize="16"/>
                                        <TimePicker/>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                        <Button Margin="5" Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon Glyph="&#xE163;" Margin="5"></FontIcon>
                                <TextBlock Text="Установить дедлайн" FontSize="12" Margin="5"/>
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout x:ConnectionId='3' Placement="Bottom"                               >
                                    <StackPanel DataContext="{Binding ElementName=TaskListView, Path=SelectedItem}">
                                        <TextBlock Text="Дата"
                       Margin="5"
                       Foreground="{ThemeResource SystemAccentColor}"
                       FontWeight="Light"
                       FontSize="16"/>

                                        <DatePicker x:ConnectionId='4' x:Name="DueDatePicker"
                        Date="{Binding DatePart,
                                       Mode=TwoWay}"/>

                                        <TextBlock Text="Время"
                       Margin="5"
                       Foreground="{ThemeResource SystemAccentColor}"
                       FontWeight="Light"
                       FontSize="16"/>

                                        <TimePicker x:ConnectionId='5' x:Name="DueTimePicker"
                        Time="{Binding TimePart,
                                       Mode=TwoWay}"/>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                    <TextBlock  Text="Теги" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                    <StackPanel Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" MinHeight="50">
                        <Button Foreground="White" Margin="5" Background="{ThemeResource SystemAccentColor}" BorderThickness="0">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon Glyph="&#xE109;" Margin="5"></FontIcon>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <TextBlock  Text="Файлы" Margin="15 10 0 10"  FontWeight="ExtraLight" FontSize="18"/>
                    <VariableSizedWrapGrid ItemHeight="30" ItemWidth="30" MaximumRowsOrColumns="4" Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" MinHeight="250">
                    </VariableSizedWrapGrid>
                </StackPanel>
                <StackPanel Grid.Column="1">
                    <TextBlock Text="Подзадачи" Margin="10,0,50,10" FontWeight="ExtraLight" FontSize="26"/>
                    <Border Margin="15 10 15 10" BorderThickness="5" BorderBrush="{ThemeResource SystemAccentColor}"/>
                    <StackPanel x:ConnectionId='1' x:Name="SubtaskDropZone"
                Margin="15"
                Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
                MinHeight="715"
                AllowDrop="True"
                                               
                                       />
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Page>

